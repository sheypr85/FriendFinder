<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>FriendFinder</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <!-- Custom Styling -->
    <link rel="stylesheet" href="/style.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">

    <!-- Font Awesome Glyphicons -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

    <!-- Chosen -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>

<body>
    <div class="container">
        <div class="jumbotron">
            <h1 class="text-center"><span class="fa fa-pencil-square-o"></span>Survey</h1>
            <hr>
            <br>
            <div class="row">
                <div class="form-group">
                    <label for="Name">Your Name</label>
                    <input type="text" class="form-control" id="name" placeholder="Name">
                </div>
                <div class="form-group">
                    <label for="imgInput">Link to Photo Image</label>
                    <input id="imgTag" name="imgTag" type="text" class="form-control" id="imgInput" placeholder="Image URL"
                        required>
                </div>
                <br>

                <form id="formQuestions">
                    <div class="form-group">
                        <label for="Select1">Going to the beach makes me happy and relaxed</label>
                        <select class="form-control" id="q1">
                            <option value="" selected>Choose an answer</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Select1">Going to the GYM everyday is whay I like to do</label>
                        <select class="form-control" id="q2">
                            <option value="" selected>Choose an answer</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Select1">I like to NETFLIX and chill every now and then</label>
                        <select class="form-control" id="q3">
                            <option value="" selected>Choose an answer</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Select1">I Enjoy Going on Hikes and enjoy nature.</label>
                        <select class="form-control" id="q4">
                            <option value="" selected>Choose an answer</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Select1">The Right kind of Music can make you smile</label>
                        <select class="form-control" id="q5">
                            <option value="" selected>Choose an answer</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Select1">Going to Diner and Movie is a perfect kind of date.</label>
                        <select class="form-control" id="q6">
                            <option value="" selected>Choose an answer</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Select1">I would rather stay home that go camping!</label>
                        <select class="form-control" id="q7">
                            <option value="" selected>Choose an answer</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Select1">I love to Travel and discover new places!</label>
                        <select class="form-control" id="q8">
                            <option value="" selected>Choose an answer</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Select1">I enjoy coming up with new adventures and stuff to do</label>
                        <select class="form-control" id="q9">
                            <option value="" selected>Choose an answer</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Select1">Coffee Makes Me Happy!</label>
                        <select class="form-control" id="q10">
                            <option value="" selected>Choose an answer</option>
                            <option value="1">1 (Strongly Disagree)</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5 (Strongly Agree)</option>
                        </select>
                    </div>
                    <button id="submit" type="submit" class="btn btn-default">Submit</button>
                </form>
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friends Link</a>
            </div>
        </footer>


        <!-- The Modal -->
        <div class="modal" id="myModal">
            <div class="modal-dialog">
                <div class="modal-content">

                    <!-- Modal Header -->
                    <div class="modal-header">
                        <h1 class="modal-title">YOU HAVE A MATCH!</h1>
                    </div>

                    <div class="modal-body row">
                        <div class="col-md-4">
                            <p class="name-body"></p>
                        </div>
                        <div class="col-md-4">
                            <p class="picture-body"></p>
                        </div>
                    </div>
                    <!-- Modal footer -->
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                    </div>

                </div>
            </div>
        </div>

    </div>



    </div>





    <script type="text/javascript">
        //Checks that everything is filled out before submitting
        function validateAnswer() {
            var validAnswer = true;
            $(".form-control").each(function () {
                if ($(this).val() === "") {
                    validAnswer = false;
                }
            });
            return validAnswer
        }

        // Grabbing form elements and sending data 
        $("#submit").on("click", function (event) {
            event.preventDefault();

            if (validateAnswer()) {
                var userInput = {
                    name: $("#name").val(),
                    photo: $("#picture").val(),
                    scores: [
                        $("#q1").val(),
                        $("#q2").val(),
                        $("#q3").val(),
                        $("#q4").val(),
                        $("#q5").val(),
                        $("#q6").val(),
                        $("#q7").val(),
                        $("#q8").val(),
                        $("#q9").val(),
                        $("#q10").val()
                    ]
                };

                // Sending object and callback
                $.post("/api/friends", userInput, function (data) {
                    console.log(data)
                    if (data) {
                        $(".name-body").append("<h2>" + data.name + "</h2>");
                        var img = $("<img>");
                        img.attr("src", data.photo);
                        img.attr("style", "width: 200px; height: 200px;");
                        $(".picture-body").append(img);
                        $("#myModal").modal('show');
                    }
                });


            } else {
                alert("Please fill out the survey before submitting!");
            };
        });
    </script>





</body>